<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tools for the USDA-NRCS National Soil Information System (NASIS) • NASIStools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Tools for the USDA-NRCS National Soil Information System (NASIS)">
<meta property="og:description" content="The goal of NASIStools is to provide methods managing NASIS data, SSURGO exports, official metadata as well as to provide ports of legacy code (such as MS Access Macros) to open source alternatives. Use cases primarily relate to data model development, QA/QC of provisional data and inspection of published products. 
    This is part of a broader goal to compartmentalize low-level procedures relevant to internal (USDA) usage. Isolating lesser-used, more specific functions allows for more comprehensive testing and opportunities to focus development of the soilDB package.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">NASIStools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9008</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="nasistools">NASIStools<a class="anchor" aria-label="anchor" href="#nasistools"></a>
</h1></div>
<!-- badges: start -->
<p>The goal of NASIStools is to provide methods managing NASIS data, SSURGO exports, official metadata as well as to provide ports of legacy code (such as MS Access Macros) to open source alternatives. Use cases primarily relate to data model development, QA/QC of provisional data and inspection of published products.</p>
<p>This is part of a broader goal to compartmentalize low-level procedures relevant to internal (USDA) usage. Isolating lesser-used, more specific functions allows for more comprehensive testing and opportunities to focus development of the soilDB package.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the package off GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get dependencies</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'remotes'</span>, <span class="st">'data.table'</span>, <span class="st">'DBI'</span>, <span class="st">'RSQLite'</span>, <span class="st">'soilDB'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get package using remotes</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"brownag/NASIStools"</span>, dependencies<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Here is how to query the “reasons” for a particular interpretation <code>mrulename</code> rating for the records stored in a SSURGO SQLite database derived from a custom NASIS export.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">NASIStools</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a SQLite file database based on the .txt files contained in a SSURGO export</span></span>
<span><span class="fu">createSSURGO</span><span class="op">(</span><span class="st">"C:/path/to/ssurgo/tabular"</span>, <span class="st">"ssurgo.sqlite"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># specify a rule name</span></span>
<span><span class="va">mrulename</span> <span class="op">&lt;-</span>  <span class="st">"FOR - Mechanical Site Preparation (Surface)"</span></span>
<span></span>
<span><span class="co"># create a DBIConnection to the SQLite database</span></span>
<span><span class="va">dsn</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"ssurgo.sqlite"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># perform a query with NASIStools</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_SSURGO_interp_reasons_by_mrulename.html">get_SSURGO_interp_reasons_by_mrulename</a></span><span class="op">(</span><span class="va">dsn</span>, <span class="va">mrulename</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://ncss-tech.github.io/soilDB/" class="external-link">soilDB</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">mrulename</span> <span class="op">&lt;-</span>  <span class="st">"WMS - Pond Reservoir Area"</span> </span>
<span></span>
<span><span class="co"># "new" tabular data from a local export</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_SSURGO_interp_reasons_by_mrulename.html">get_SSURGO_interp_reasons_by_mrulename</a></span><span class="op">(</span><span class="va">dsn</span>, <span class="va">mrulename</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># "old" tabular data queried from SDA</span></span>
<span><span class="va">result_ssurgo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ncss-tech.github.io/soilDB/reference/get_SDA_interpretation.html" class="external-link">get_SDA_interpretation</a></span><span class="op">(</span><span class="va">mrulename</span>,</span>
<span>                                        method <span class="op">=</span> <span class="st">"NONE"</span>,</span>
<span>                                        areasymbols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CA630"</span>,<span class="st">"CA649"</span><span class="op">)</span><span class="op">)</span></span>
<span>                                        </span>
<span><span class="co"># assemble tables of mukey, compname, rating/class and reason</span></span>
<span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>mukey <span class="op">=</span> <span class="va">result</span><span class="op">$</span><span class="va">mukey</span>,</span>
<span>                 compname <span class="op">=</span> <span class="va">result</span><span class="op">$</span><span class="va">compname</span>,</span>
<span>                 rating_new <span class="op">=</span> <span class="va">result</span><span class="op">$</span><span class="va">interphr</span>,</span>
<span>                 rating_class <span class="op">=</span> <span class="va">result</span><span class="op">$</span><span class="va">interphrc</span>,</span>
<span>                 rating_new_reason <span class="op">=</span> <span class="va">result</span><span class="op">$</span><span class="va">Reason</span><span class="op">)</span></span>
<span></span>
<span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>mukey <span class="op">=</span> <span class="va">result_ssurgo</span><span class="op">$</span><span class="va">mukey</span>,</span>
<span>                 compname <span class="op">=</span> <span class="va">result_ssurgo</span><span class="op">$</span><span class="va">compname</span>,</span>
<span>                 rating_old <span class="op">=</span> <span class="va">result_ssurgo</span><span class="op">$</span><span class="va">rating</span>,</span>
<span>                 rating_class <span class="op">=</span> <span class="va">result_ssurgo</span><span class="op">$</span><span class="va">class</span>,</span>
<span>                 rating_old_reason <span class="op">=</span> <span class="va">result</span><span class="op">$</span><span class="va">reason_WMSPondReservoirArea</span><span class="op">)</span></span>
<span></span>
<span><span class="va">combined_result</span> <span class="op">&lt;-</span> <span class="va">x2</span><span class="op">[</span><span class="va">x1</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mukey"</span>,<span class="st">"compname"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">combined_result</span><span class="op">$</span><span class="va">CHECK</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">combined_result</span><span class="op">$</span><span class="va">rating_new</span>, <span class="fl">2</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">combined_result</span><span class="op">$</span><span class="va">rating_old</span>, <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing NASIStools</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Andrew Brown <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/brownag/NASIStools/actions" class="external-link"><img src="https://github.com/brownag/NASIStools/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://brownag.github.io/NASIStools/" class="external-link"><img src="https://img.shields.io/badge/docs-HTML-informational" alt="NASIStools Manual"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Andrew Brown.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
